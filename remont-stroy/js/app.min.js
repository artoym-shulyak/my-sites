(()=>{"use strict";const e=e=>{if("undefined"!=typeof Swiper)switch(e){case"your-flat":new Swiper(".your-flat__swiper",{loop:!0,slidesPerView:"auto",spaceBetween:40,centeredSlides:!0,speed:800,allowTouchMove:!1,pagination:{el:".your-flat__pagination",clickable:!0},navigation:{prevEl:".your-flat__prev",nextEl:".your-flat__next"}});break;case"ex-works":new Swiper(".ex-works__swiper",{loop:!0,slidesPerView:"auto",spaceBetween:40,centeredSlides:!0,observer:!0,observeParents:!0,touchRatio:0,speed:900,pagination:{el:".ex-works__pagination",clickable:!0},navigation:{prevEl:".ex-works__prev",nextEl:".ex-works__next"},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:20},1024:{spaceBetween:40}}})}},t=e=>{if("undefined"!=typeof Swiper)switch(e){case"types-repairs":document.querySelectorAll(".types-repairs__swiper").forEach((e=>{const t=e.querySelector("._prev"),r=e.querySelector("._next");e&&t&&r&&new Swiper(e,{loop:!0,slidesPerView:1,spaceBetween:30,observer:!0,observeParents:!0,touchRatio:0,speed:900,navigation:{prevEl:t,nextEl:r},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:20},1024:{spaceBetween:30}}})}));break;case"service__swiper":document.querySelectorAll(".service__swiper").forEach((e=>{const t=e.querySelector("._prev"),r=e.querySelector("._next");e&&t&&r&&new Swiper(e,{loop:!0,slidesPerView:1,spaceBetween:30,observer:!0,observeParents:!0,touchRatio:0,speed:900,navigation:{prevEl:t,nextEl:r},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:20},1024:{spaceBetween:30}}})}));break;case"build-house":document.querySelectorAll(".build-house__swiper").forEach((e=>{const t=e.querySelector("._prev"),r=e.querySelector("._next");e&&t&&r&&new Swiper(e,{loop:!0,slidesPerView:1,spaceBetween:30,observer:!0,observeParents:!0,touchRatio:0,speed:900,navigation:{prevEl:t,nextEl:r},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:20},1024:{spaceBetween:30}}})}));break;case"more-info":document.querySelectorAll(".more-info__swiper").forEach(((e,t)=>{const r=e.closest(".more-info__slider"),s=r.querySelector(".more-info__prev"),o=r.querySelector(".more-info__next");e&&s&&o&&r&&new Swiper(e,{loop:!0,slidesPerView:1,spaceBetween:30,observer:!0,observeParents:!0,touchRatio:0,speed:900,navigation:{prevEl:s,nextEl:o},autoplay:{delay:3e3*(t+1),disableOnInteraction:!1},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:20},1024:{spaceBetween:30}}})}))}},r=(e,t)=>{document.querySelectorAll(e).forEach((e=>{e.querySelector(t).addEventListener("click",(()=>{!function(e){e.classList.toggle("_active")}(e)}))}))},s=()=>{const e=document.querySelector("body"),t=document.querySelector("#header"),r=document.querySelector(".fix-btns"),s=window.innerWidth-document.body.offsetWidth;e.style.marginRight=`${s}px`,t.style.paddingRight=`${s}px`,r.style.marginRight=`${s}px`,e.classList.add("lock")},o=()=>{const e=document.querySelector("body"),t=document.querySelector("#header");document.querySelector(".fix-btns").style.marginRight="0",t.style.paddingRight="0",e.style.marginRight="0",e.classList.remove("lock")},c=(e,t)=>{const r=document.querySelector(e),c=document.querySelector(t),n=c.querySelector("[data-close]");r&&c&&n&&(r.addEventListener("click",(e=>{e.preventDefault(),c.classList.add("_active"),s()})),n.addEventListener("click",(e=>{c.classList.remove("_active"),o()})),c.addEventListener("click",(e=>{e.target&&e.target===c&&(c.classList.remove("_active"),o())})))};document.addEventListener("DOMContentLoaded",(()=>{try{!function(){let e=new Image;e.onload=e.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=Array.from(document.querySelectorAll(".lazy, source[data-srcset], [data-bg]")),t=e=>{if("IMG"===e.tagName){const t=e.getAttribute("data-src");t&&(e.src=t,e.onload=()=>e.classList.add("lazy-loaded"),e.onerror=()=>e.classList.add("lazy-error"),e.removeAttribute("data-src"))}else if("SOURCE"===e.tagName){const t=e.getAttribute("data-srcset");t&&(e.srcset=t,e.removeAttribute("data-srcset"))}};if("IntersectionObserver"in window){const r=new IntersectionObserver(((e,r)=>{e.forEach((e=>{e.isIntersecting&&(t(e.target),r.unobserve(e.target))}))}),{rootMargin:"200px 0px"});e.forEach((e=>r.observe(e)))}else{const r=()=>{e.forEach((e=>{s(e)&&t(e)}))},s=e=>e.getBoundingClientRect().top<window.innerHeight+200;window.addEventListener("scroll",r),window.addEventListener("resize",r),r()}})(),(()=>{try{const e=document.querySelector(".btn-pages"),t=document.querySelector(".pages"),r=t.querySelector("[data-close]");e.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("_active"),s()})),r.addEventListener("click",(e=>{t.classList.remove("_active"),o()})),t.addEventListener("click",(e=>{e.target&&e.target===t&&(t.classList.remove("_active"),o())}))}catch(e){console.log(e)}})(),window.onload=()=>{(async()=>{try{const e=await fetch("../files/exel.xlsx");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.arrayBuffer(),r=XLSX.read(t,{type:"array"}),s=r.SheetNames[0],o=r.Sheets[s],c=XLSX.utils.sheet_to_json(o,{header:1}),n=c[6].indexOf("Наименование работ"),a=c[6].indexOf("Ед. изм."),i=c[6].indexOf("Стоимость");if(-1===n||-1===a||-1===i)return void console.error("Не найдены нужные колонки в таблице");let l="",d=null;c.slice(7).forEach((e=>{const t=Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&""!==e[0].trim()&&void 0===e[n],r=Array.isArray(e)&&e.length>0&&void 0!==e[n]&&void 0!==e[a]&&void 0!==e[i],s=Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&(e[0].trim().startsWith("Всего по разделу:")||e[0].trim().startsWith("ИТОГО :"));if(t&&!s)d&&(l+="</div></div>"),d=e[0].trim(),l+=`\n\t\t\t\t\t\t\t\t<div class="price-list__item">\n\t\t\t\t\t\t\t\t\t<div class="price-list__head">${d}</div>\n\t\t\t\t\t\t\t\t\t<div class="price-list__foot">\n\t\t\t\t\t\t\t\t\t\t<div class="price-list__wrap">\n\t\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">Наименование работ</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">Ед. изм.</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">Рубли</div>\n\t\t\t\t\t\t\t\t\t\t</div>`;else if(r&&d){const t=e[n],r=e[a],s=e[i];l+=`\n\t\t\t\t\t\t\t\t\t<div class="price-list__wrap">\n\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">${t}</div>\n\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">${r}</div>\n\t\t\t\t\t\t\t\t\t\t<div class="price-list__elem">${s}</div>\n\t\t\t\t\t\t\t\t\t</div>`}})),d&&(l+="</div></div>");const u=document.querySelector(".price-list__items");u?u.innerHTML=l:console.error(".price-list__items container not found!")}catch(e){console.error("Ошибка при загрузке Excel:",e)}})().then((()=>{r(".price-list__item",".price-list__head")}))},["-call","-call-up","-work","-base","-contacts"].forEach((e=>(e=>{const t=document.getElementById(`feedbackForm${e}`),r=document.getElementById(`your-name${e}`),s=document.getElementById(`your-phone${e}`),o=document.getElementById(`agreement${e}`),c=document.getElementById(`email${e}`),n=document.getElementById(`nameError${e}`),a=document.getElementById(`phoneError${e}`),i=document.getElementById(`agreementError${e}`);t&&r&&s&&c&&o&&n&&a&&i&&t.addEventListener("submit",(function(e){let t=!0;r.value.trim()?n.textContent="":(n.textContent="Пожалуйста, введите ваше имя.",t=!1),s.value.trim()?/^\+?\d{10,15}$/.test(s.value)?a.textContent="":(a.textContent="Пожалуйста, введите корректный номер телефона.",t=!1):(a.textContent="Пожалуйста, введите ваш телефон.",t=!1),o.checked?i.textContent="":(i.textContent="Вы должны согласиться на обработку персональных данных.",t=!1),c.value.trim()&&(t=!1),t||e.preventDefault()}))})(e))),(()=>{const e=document.getElementById("room-size"),t=document.getElementById("room-range"),r=document.querySelector(".hero__price"),s=document.querySelectorAll("input[name='repair_type']");function o(){const t=parseInt(e.value,10);let s;switch(document.querySelector("input[name='repair_type']:checked").value){case"Черновой":s=12e3;break;case"Косметический":s=8e3;break;case"Капитальный":s=16e3;break;case"Дизайнерский":s=2e4;break;default:s=1e3}const o=t*s;r.textContent=o.toLocaleString()+" ₽"}function c(){const e=t.min,r=t.max,s=(t.value-e)/(r-e)*100;t.style.background=`linear-gradient(to right, #FF7A40 ${s}%, #E3E3E3 ${s}%)`}e&&t&&r&&s&&(e.addEventListener("blur",(()=>{e.value<20?e.value=20:e.value>160&&(e.value=160),t.value=e.value,o(),c()})),t.addEventListener("input",(()=>{e.value=t.value,o(),c()})),s.forEach((e=>e.addEventListener("change",(()=>{o(),c()})))),o(),c())})(),(()=>{try{const e=document.querySelector(".calc__body"),t=document.getElementById("room-size"),r=document.getElementById("room-range"),s=document.getElementById("work-cost"),o=document.getElementById("material-cost"),c=document.getElementById("total-cost");if(!(e&&t&&r&&s&&o&&c))return;const n={"property-type":{new:0,secondary:500,country:1e3},"repair-type":{draft:12e3,cosmetic:8e3,capital:16e3,designer:2e4},demolition:{yes:400,no:0},"wall-alignment":{yes:800,no:0},replanning:{yes:700,no:0},"ceiling-height":{250:0,275:300,300:600}},a=1e5;function i(){let r=0;const i=parseInt(t.value,10);Object.keys(n).forEach((t=>{const s=e.querySelector(`input[name="${t}"]:checked`).value;r+=n[t][s]*i})),"yes"===e.querySelector("input[name='bathrooms']:checked").value&&(r+=a);const l=Math.round(.4*r);let d=r+l;s.textContent=r.toLocaleString(),o.textContent=l.toLocaleString(),c.textContent=d.toLocaleString()}e.addEventListener("change",i),t.addEventListener("input",(e=>{r.value=e.target.value,i()})),r.addEventListener("input",(e=>{t.value=e.target.value,i()})),i()}catch(l){console.error("Ошибка при инициализации калькулятора:",l)}})(),((e,t)=>{const r=document.querySelectorAll(e),s=document.querySelectorAll(t);function o(o){r.forEach((e=>{e.classList.remove("_active")})),s.forEach((e=>{e.classList.remove("_active")})),document.querySelector(`${e}[data-tab="${o}"]`).classList.add("_active"),document.querySelector(`${t}[data-tab-content="${o}"]`).classList.add("_active")}0!==r.length&&0!==s.length&&(r.forEach((e=>{e.addEventListener("click",(()=>{o(e.getAttribute("data-tab"))}))})),o(1))})(".types-repairs__tab",".types-repairs__wrapper"),(()=>{const e=document.querySelectorAll(".your-flat__beer");e.length<1||e.forEach((e=>{new BeerSlider(e)}))})(),t("service__swiper"),t("build-house"),t("more-info"),["your-flat","ex-works"].forEach(e),"undefined"!=typeof Swiper&&new Swiper(".clients__swiper",{loop:!0,slidesPerView:3,spaceBetween:30,observer:!0,observeParents:!0,touchRatio:0,speed:900,navigation:{prevEl:".clients__prev",nextEl:".clients__next"},breakpoints:{320:{spaceBetween:10,slidesPerView:1},576:{spaceBetween:15,slidesPerView:1},768:{spaceBetween:20,slidesPerView:2},1024:{spaceBetween:30,slidesPerView:2},1200:{spaceBetween:20,slidesPerView:3},1362:{spaceBetween:30,slidesPerView:3}}}),r(".questions__item",".questions__head"),c("#call-btn","#call-modal"),c("#work-btn","#work-modal"),c("#up-btn","#up-modal"),(()=>{const e=document.querySelector("#misc-modal"),t=document.querySelector("#misc-btn"),r=e.querySelector("[data-close]");if(!t||!e||!r)return;const c=()=>{window.scrollY>0?e.classList.add("_min"):e.classList.remove("_min")};t.addEventListener("click",(r=>{r.preventDefault(),t.classList.toggle("_active"),e.classList.toggle("_active"),s(),c()})),r.addEventListener("click",(r=>{t.classList.remove("_active"),e.classList.remove("_active"),o()})),c()})(),[{query:"(min-width: 1024px)",callback:e=>e&&t("types-repairs")},{query:"(min-width: 768px)",callback:e=>e&&(()=>{const e=document.querySelector("#header"),t=e.querySelector(".header__top"),r=e.querySelector(".header__middle"),s=e.querySelector(".header__bottom"),o=e.querySelectorAll(".header__elems");if(!(e&&t&&r&&s))return;if(o.length<1)return;let c=window.scrollY;const n=e=>{e>1?(t.classList.add("_hide"),r.classList.add("_min"),s.classList.add("_min"),o.forEach((e=>{e.classList.add("_min")}))):(t.classList.remove("_hide"),r.classList.remove("_min"),s.classList.remove("_min"),o.forEach((e=>{e.classList.remove("_min")})))};n(window.scrollY),window.addEventListener("scroll",(()=>{const e=window.scrollY;e!==c&&(n(e),c=e)}))})()},{query:"(min-width: 1200px)",callback:e=>e&&(()=>{const e=document.querySelectorAll(".misc__wrap._first .misc__elem"),t=document.querySelectorAll(".misc__wrap._second .misc__list"),r=document.querySelectorAll(".misc__wrap._third .misc__list");e.forEach((e=>{e.addEventListener("mouseenter",(()=>{r.forEach((e=>e.classList.remove("_active")));const s=e.getAttribute("data-target"),o=document.querySelector(`.misc__wrap._second .misc__list[data-group="${s}"]`);t.forEach((e=>e.classList.remove("_active"))),o&&o.classList.add("_active")}))})),t.forEach((e=>{e.querySelectorAll(".misc__elem").forEach((e=>{e.addEventListener("mouseenter",(()=>{const t=e.getAttribute("data-target"),s=document.querySelector(`.misc__wrap._third .misc__list[data-group="${t}"]`);r.forEach((e=>e.classList.remove("_active"))),s&&s.classList.add("_active")}))}))}))})()},{query:"(max-width: 1200px)",callback:e=>{e&&((()=>{const e=document.querySelector("#burger-btn"),t=document.querySelector("#md-menu"),r=t.querySelector("[data-close]");e&&t&&r&&(e.addEventListener("click",(r=>{r.preventDefault(),e.classList.toggle("active"),t.classList.toggle("_active"),document.querySelector("body").classList.toggle("lock")})),r.addEventListener("click",(r=>{t.classList.remove("_active"),e.classList.remove("active"),document.querySelector("body").classList.remove("lock")})))})(),document.querySelectorAll(".md-menu__wrap").forEach((function(e){const t=e.querySelector(".md-menu__service"),r=e.querySelector(".md-menu__elems");t.addEventListener("click",(function(e){e.preventDefault(),r.classList.toggle("_show"),t.classList.toggle("_active")}))})))}}].forEach((({query:e,callback:t})=>{const r=window.matchMedia(e);t(r.matches),r.addEventListener("change",(e=>t(e.matches)))}))}catch(e){console.error("Ошибка выполнения скрипта:",e)}}))})();